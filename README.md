# ■ 背景・目的
- Rustのお勉強のため
- atmarkIT の RUST お勉強講座
  - URL: https://atmarkit.itmedia.co.jp/ait/series/24844/

# ■ 講座の内容
## ▼ 第一回
- MicrosoftとGoogleが採用
- 高い安全性を保ちながら、並列性を担保し、細かなリソース操作も可能にしたプログラミング言語
  - メモリ安全性（メモリ利用における安全性が言語によって保証されていること）を実現
  - ネイティブコンパイラ言語ならではのコンパクトさと高速性を持つ
  - メモリなどのリソースの細やかな取り回しが可能
  - C/C++の弱点といわれる低い並列性、ポインタに代表される危険性を克服

- 現在のネイティブコンパイラ言語
  - 動的にポインタの有効性などをチェックするのは性能とのトレードオフの関係にあり、一般的には行われていない
  - JavaやC#といった中間言語型の言語では動的なチェックを行っていますが、性能的には不利

- Rustの制約
  - 「ボローチェッカー」
    - メモリなどのリソースの所有者とリソースの生存期間（ライフタイム）の静的解析をする仕組み
  - リソースと所有者を1対1にする
    - ある変数がオブジェクトを所有するとして、そのオブジェクトは他の変数では所有できないようにする
    - 変数の消滅とオブジェクトの破棄というライフタイムを管理できる

- 制約に伴う効果
  - ライフタイムを管理できるのでオブジェクトの破棄タイミングをコンパイラが把握でき、不要になったタイミングですぐに破棄できる
    - GC（ガベージコレクタ）が不要ということ

- コンパクトで高速なコンパイラ型言語
  - Rustのコンパイラは、Clangと同様にLLVMと呼ばれる仮想コンパイラプラットフォームに基づいたコンパイル機構に準拠
  - LLVMの中間コードにいったん変換されたあと、最終的にターゲットとなるCPUで動作可能なバイナリを生成

- マルチスレッドプログラミングへの対応
  - C/C++
    - スレッドセーフでないことがたびたび問題視される
      - Cの一部の標準ライブラリ関数ではstatic（静的）な変数を使っているため、複数のスレッドから関数を呼び出すことで競合が発生する可能性がある
      - 変数をロックして競合の問題を回避したとしても、今度はロック解除待ちが相互に発生するデッドロックの問題もある
      - 現在はpthreadsといったPOSIX準拠のマルチスレッド対応ライブラリの登場で状況は変わっているが、外部ライブラリに頼らざるを得ない状況は変わっていない
  - Rust
    - 標準ライブラリにマルチスレッドの機能が用意されているので、スレッドセーフが保証されている

- 自動テスト機能
- モジュールシステムとパッケージマネジャーCargo
- Rustのドキュメント（マニュアル）
  - 日本語のドキュメントを読むことができる

- Rustのプログラム
  - 主要なプログラム
    - rustup：Rustのツールチェーンを管理
      - Rustをインストール、アップデートしたりアンインストールしたりする
    - rustc：Rustコンパイラ
      - 中間言語、実行バイナリ、静的ライブラリ、動的ライブラリをソースコードから生成する
    - cargo：パッケージマネジャー（ビルドツール）
      - Rustのビルドツール
      - プロジェクトのビルド、テスト、外部ライブラリのダウンロード、ドキュメントの作成

- プロジェクト
  - Rustでは、アプリケーションを「プロジェクト」という単位で管理

- パッケージ
  - プロジェクトにおける機能の単位

- パッケージの作成
```shell
% pwd
/Users/nao/Documents/atmarkit_rust
% cargo new --bin hello_world
    Created binary (application) `hello_world` package
%
```

- フォルダ構成
  - src
    - ソースファイルの置き場所
  - target
    - コンパイル結果の置き場所
    - デフォルトではデバッグターゲットのためのdebugフォルダが作成される
    - cargo runに--releaseオプションを与えるとリリースターゲットとなる
      - releaseフォルダが作成されてそこに成果物が置かれる